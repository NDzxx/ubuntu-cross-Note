# docker安装

##查看内核和版本
```
[root@localhost ~]# uname -r
2.6.32-431.el6.x86_64

[root@localhost ~]# cat /etc/issue
CentOS release 6.5 (Final)
Kernel \r on an \m
```
##安装  
```
[root@localhost ~]# rpm -ivh http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
Retrieving http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
warning: /var/tmp/rpm-tmp.JN76fI: Header V3 RSA/SHA256 Signature, key ID 0608b895: NOKEY
Preparing...                ########################################### [100%]
   1:epel-release           ########################################### [100%]
[root@localhost ~]# rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6

[root@localhost ~]# yum -y install docker-io
[root@localhost ~]# yum upgrade device-mapper-libs
[root@localhost ~]# service docker restart
[root@localhost ~]# chkconfig docker on

```
安装镜像
```
#cento 6.5镜像
docker pull hub.c.163.com/public/centos:6.5
#redis镜像
docker pull hub.c.163.com/library/redis:3.0.7
#mysql 5.7.11镜像  
docker pull hub.c.163.com/library/mysql:5.7.11

cento 6.5升级内核安装docker
http://blog.csdn.net/wuzhilon88/article/details/41621285/
要升级内核
http://www.oschina.net/translate/nstalling-dockerio-on-centos-64-64-bit?cmp

测试6.4能否升级内核使用

当前系统为CentOS Linux release 6.4 (Final)，内核版本为2.6.32-358.el6.i686.将内核升级至3.4.56最新版本。
1、查看当前系统内核
# uname -r
2 2.6.32-358.el6.i686
2、下载linux-3.4.56内核包
# cd ~
# wget -c https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.4.56.tar.xz
# tar -Jxvf linux-3.4.56.tar.xz
# mv linux-3.4.56 /usr/src/linux-3.4.56
# cd linux-3.4.56
3、配置内核并安装
# make mrproper #清除环境变量，即清除配置文件
# make menuconfig #在菜单模式下选择需要编译的内核模块
# make clean #确保所有东西均保持最新状态.
# make bzImage #生成内核文件
# make modules #编译模块
# make modules_install #安装模块
# make install #安装
4、编辑 /etc/grub.conf 文件，将 default=1 改为 default=0
# cat /etc/grub.conf
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE: You have a /boot partition. This means that
# all kernel and initrd paths are relative to /boot/, eg.
# root (hd0,0)
# kernel /vmlinuz-version ro root=/dev/mapper/VolGroup-lv_root
# initrd /initrd-[generic-]version.img
#boot=/dev/sda
default=1
timeout=3
splashimage=(hd0,0)/grub/splash.xpm.gz
hiddenmenu
title CentOS (3.4.56)
        root (hd0,0)
        kernel /vmlinuz-3.4.56 ro root=UUID=2c06f495-2f8c-4930-8968-9c612d32edc1 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=zh_CN.UTF-8 rd_NO_LVM rd_NO_DM rhgb quiet
        initrd /initramfs-3.4.56.img
title CentOS (2.6.32-358.14.1.el6.i686)
        root (hd0,0)
        kernel /vmlinuz-2.6.32-358.14.1.el6.i686 ro root=UUID=2c06f495-2f8c-4930-8968-9c612d32edc1 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=zh_CN.UTF-8 rd_NO_LVM rd_NO_DM rhgb quiet
        initrd /initramfs-2.6.32-358.14.1.el6.i686.img
title CentOS (2.6.32-358.el6.i686)
        root (hd0,0)
        kernel /vmlinuz-2.6.32-358.el6.i686 ro root=UUID=2c06f495-2f8c-4930-8968-9c612d32edc1 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=zh_CN.UTF-8 rd_NO_LVM rd_NO_DM rhgb quiet
        initrd /initramfs-2.6.32-358.el6.i686.img
5、重启系统,并查看内核
# reboot
# uname -r
3.4.56


```  



